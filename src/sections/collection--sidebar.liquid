{% if collection.handle contains 'women' %}
  {% assign gender = 'collections.general.women' | t | downcase %}
{% elsif collection.handle contains 'men' %}
  {% assign gender = 'collections.general.men' | t | downcase %}
{% elsif collection.handle contains 'youth' %}
  {% assign gender = 'collections.general.youth' | t | downcase %}
{% else %}
  {% assign gender = '' %}
{% endif %}

<div class="collection--sidebar" data-collection="{{ collection.handle }}">
  <div class="sidebar--block">
    <h4 class="sidebar--heading">Collections</h4>
    <ul class="sidebar--links--block">
      <li><a href="/collections/all" class="{%- if collection.handle == 'all' -%}sidebar-link--active{%- endif -%}">Shop all</a></li>
      {% for link in linklists['header-menu'].links %}
        <li><a href="{{ link.url }}" class="{%- if link.handle == gender -%}sidebar-link--active{%- endif -%}">{{ link.title }}</a></li>
      {% endfor %}
    </ul>
  </div>

  {% if gender > '' %}
    <div class="sidebar--block">
      <h4 class="sidebar--heading">Shop</h4>

      <ul class="sidebar--links--block" data-type-filters>
        {% for link in linklists['header-menu'].links %}
          {% if link.handle == gender %}
            {% for second_level_link in link.links %}
              <li>
                <a href="{{ second_level_link.url }}" data-collection-handle="{{ second_level_link.object.handle }}" class="{%- if second_level_link.active -%}sidebar-link--active{%- endif -%}">
                  {{ second_level_link.title }}
                </a>
                {% if link.levels > 0 %}
                  <ul>
                    {% for third_level_link in second_level_link.links %}
                      <li>
                        <a href="{{ third_level_link.url }}" data-collection-handle="{{ third_level_link.object.handle }}" class="{%- if third_level_link.active -%}sidebar-link--active{%- endif -%}">
                          {{ third_level_link.title }}
                        </a>
                      </li>
                    {% endfor %}
                  </ul>
                {% endif %}
              </li>
            {% endfor %}
          {% endif %}
        {% endfor %}
      </ul>
    </div>
  {% endif %}

  <div class="sidebar--block">
    <h4 class="sidebar--heading sidebar--heading--no-border sidebar--heading--designs">
      <div>DESIGNS</div>
      <a href="#" class="see-all-designs">See all</a>
    </h4>

    <div class="sidebar--designs toggles--section" data-design-filters>
      {% comment %} Design swatches generated in filters.js based on the product designs in the current collection being viewed
      {% endcomment %}
    </div>
  </div>

  <div class="sidebar--block">
    <h4 class="sidebar--heading sidebar--heading--no-border">Filter By</h4>

    <div class="toggles--section">
      <div class="toggle--item">
        <div class="toggle--activation" data-ix="toggle-interaction">
          <h4 class="toggle--heading">Size</h4>
          {% include 'icon-minus' %}
          {% include 'icon-plus' %}
        </div>
        <div class="toggle--contents" data-size-filters>
          {% comment %} Sizes generated in filters.js {% endcomment %}
        </div>
      </div>

      <div class="toggle--item">
        <div class="toggle--activation" data-ix="toggle-interaction">
          <h4 class="toggle--heading">Color</h4>
          {% include 'icon-minus' %}
          {% include 'icon-plus' %}
        </div>
        <div class="toggle--contents" data-color-filters>
          {% comment %} Colors generated in filters.js {% endcomment %}
        </div>
      </div>
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Collection Sidebar Blocks",
  "settings": [],
  "blocks": []
}
{% endschema %}