{% paginate collection.products by 6 %}
<div id="MainContent">
    <div class="EndlessScroll">
      {% for product in collection.products%}

      {% if product.type == 'Pocket' %}
      <a href="{{ product.url }}" class="product--grid--item--four three--row w-inline-block coloredBg">
        <div class="product--grid--item--image men--tshirt random-colored-bg">
          <div class="product--grid--item--variant--overlay">
            {% for image in product.images limit: 1 %}
            <img src="{{ image.src | product_img_url: 'medium'  }}" 
                 width="45"
                 height="45"
                 class="product--grid--item--pocket">
            {%endfor%}
          </div>
        </div>
        <h5 class="product--grid--item--title">{{ product.title }}</h5>
        <div>{{ product.price | money }}</div>
      </a>

      {%else%}
      <a href="{{product.url}}" class="product--grid--item--four three--row w-inline-block">
        <div class="product--grid--item--image t-shirt random-colored-bg">
          <div class="product--grid--item--variant--overlay"></div>
        </div>
        <h5 class="product--grid--item--title">{{product.title}}</h5>
        <div>{{ product.price | money }}</div>
        <div class="product--grid--item--link">See more styles</div>
      </a>
      {%endif%}

      {%endfor%}

      {% if paginate.next %}
      <div class="pagination"><a href="{{ paginate.next.url }}">Loading more</a></div>
      {% endif %}
    </div>
</div>
{% endpaginate %}

<script>
  (function () {
    $(document).ready(_ => {
      const products = $('.product--grid--item--image').children()
      const urlParams = getProductUrlparams(window.location.href)

      products.map((index, item) => {
        let product = $(item)
        const product_type = product.css('background-image')

        product.css('background-image', `url('${getRandImg(urlParams)}')`)

        if(product_type.includes('child'))
          product
          .find('img.product--grid--item--pocket')
          .css('top', '10px')
          .css('left', '-79px')
          })
    })
  })()
</script>

<style>
  div#shopify-section-collection--section { width: inherit; }
  
  .EndlessScroll { 
    display: flex;
    flex-flow: row wrap;
  }
</style>