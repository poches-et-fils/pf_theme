{%- comment -%} 
Poches et Fils theme 
Version: 1.0.0
Configured 2018
- Added Google Font Rubik
- Added Stylesheet Dependencies for Tables/Columns/Flex Boxes etc
- Added 'on touch' JS which interfaces mobile pgones.
- Added custom JS which imports product API
{%- endcomment -%}
<!doctype html> 
<!--[if IE 9]> <html class="ie9 no-js supports-no-cookies" lang="{{ shop.locale }}"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html class="no-js supports-no-cookies" lang="{{ shop.locale }}"> <!--<![endif]-->
<head>
  <script type="text/javascript">
    window.currencySymbol = '$';
    {% if shop.currency == 'EUR' %}
      window.currencySymbol = 'â‚¬';
    {% endif %}
  </script>
  <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

  <link rel="stylesheet" type="text/css" href="https://cdn.rawgit.com/mikhailarden/Shopify-OpenSource/master/Theme%20Dependenices/components.css">
  <link href="https://daks2k3a4ib2z.cloudfront.net/img/favicon.ico" rel="shortcut icon" type="image/x-icon">
  <link href="https://daks2k3a4ib2z.cloudfront.net/img/webclip.png" rel="apple-touch-icon">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="theme-color" content="{{ settings.color_primary }}">
  <link rel="canonical" href="{{ canonical_url }}">
  {% if settings.favicon != blank %}
  <link rel="shortcut icon" href="{{ settings.favicon | img_url: '32x32' }}" type="image/png">
  {% endif %}
  {% capture seo_title %}
  {{ page_title }}
  {% if current_tags %}
  {%- assign meta_tags = current_tags | join: ', ' %} &ndash; {{ 'general.meta.tags' | t: tags: meta_tags -}}
  {% endif %}
  {% if current_page != 1 %}
  &ndash; {{ 'general.meta.page' | t: page: current_page }}
  {% endif %}
  {% unless page_title contains shop.name %}
  &ndash; {{ shop.name }}
  {% endunless %}
  {% endcapture %}
  <title>{{ seo_title }}</title>
  {% if page_description %}
  <meta name="description" content="{{ page_description | escape }}">
  {% endif %}
  {% include 'social-meta-tags' %}
  {{ 'theme.css' | asset_url | stylesheet_tag }}
  {{ 'theme.scss.css' | asset_url | stylesheet_tag }}
  <script>
    document.documentElement.className = document.documentElement.className.replace('no-js', 'js');
    window.theme = {
      strings: {
        addToCart: {{ 'products.product.add_to_cart' | t | json }},
        soldOut: {{ 'products.product.sold_out' | t | json }},
        unavailable: {{ 'products.product.unavailable' | t | json }}
      },
      moneyFormat: {{ shop.money_format | json }}
    };
  </script>
  {% if template.directory == 'customers' %}
  <!--[if (gt IE 9)|!(IE)]><!--><script src="{{ 'shopify_common.js' | shopify_asset_url }}" defer="defer"></script><!--<![endif]-->
  <!--[if lte IE 9]><script src="{{ 'shopify_common.js' | shopify_asset_url }}"></script><![endif]-->
  {% endif %}
  <!--[if (gt IE 9)|!(IE)]><!--><script src="{{ 'vendor.js' | asset_url }}" defer="defer"></script><!--<![endif]-->
  <!--[if lt IE 9]><script src="{{ 'vendor.js' | asset_url }}"></script><![endif]-->
  <!--[if (gt IE 9)|!(IE)]><!--><script src="{{ 'theme.js' | asset_url }}" defer="defer"></script><!--<![endif]-->
  <!--[if lt IE 9]><script src="{{ 'theme.js' | asset_url }}"></script><![endif]-->
  {{ content_for_header }}
</head>
<body id="{{ page_title | handle }}" class="template-{{ template.name | handle }}">
  <a class="in-page-link visually-hidden skip-link" 
     href="#MainContent">
    {{ 'general.accessibility.skip_to_content' | t }}
  </a>
  {% section 'header' %}
  
  <div class="dark-overlay"></div>
  <div id="CartHolder" style="position: relative; z-index: 1000"></div>

  <main role="main" id="MainContent">
    {{ content_for_layout }}


    <div id="design-selector">
      <div class="close-modal">X</div>
      <h4>All Designs</h4>
      <div class="design-selector-nav">
        <a href="#" style="font-weight:bold;" data-product-category="All">All</a> | <a href="#" data-product-category="Random">Random</a> | <a href="#" data-product-category="Animals">Animals</a> | <a href="#" data-product-category="Sports">Sports</a> | <a href="#">Patterns</a> | <a href="#" data-product-category="Food">Food</a> | <a href="#" data-product-category="Collaboration">Collaboration</a>
      </div>
      <div class="design-selector-products" data-product-category="All" style="display: block;">
        {% for dproduct in collections.all-designs.products limit: 250 %}
          <div class="design-selector-design" data-design-handle="{{ dproduct.handle }}" data-design-title="{{ dproduct.title | replace: " ", "+" }}"><img src="{{ dproduct | img_url: '480x480' }}" class="design-selector-design-image" /><div class="design-selector-design-label">{{ dproduct.title }}</div></div>
        {% endfor %}
      </div>
      <div class="design-selector-products" data-product-category="Random">
        {% for dproduct in collections.all-designs.products limit: 250 %}
          {% if dproduct.tags contains "random" %}
            <div class="design-selector-design" data-design-handle="{{ dproduct.handle }}" data-design-title="{{ dproduct.title | replace: " ", "+" }}"><img src="{{ dproduct | img_url: '480x480' }}" class="design-selector-design-image" /><div class="design-selector-design-label">{{ dproduct.title }}</div></div>
          {% endif %}
        {% endfor %}
      </div>
      <div class="design-selector-products" data-product-category="Animals">
        {% for dproduct in collections.all-designs.products limit: 250 %}
          {% if dproduct.tags contains "animals" %}
            <div class="design-selector-design" data-design-handle="{{ dproduct.handle }}" data-design-title="{{ dproduct.title | replace: " ", "+" }}"><img src="{{ dproduct | img_url: '480x480' }}" class="design-selector-design-image" /><div class="design-selector-design-label">{{ dproduct.title }}</div></div>
          {% endif %}
        {% endfor %}
      </div>
      <div class="design-selector-products" data-product-category="Sports">
        {% for dproduct in collections.all-designs.products limit: 250 %}
          {% if dproduct.tags contains "sports" %}
            <div class="design-selector-design" data-design-handle="{{ dproduct.handle }}" data-design-title="{{ dproduct.title | replace: " ", "+" }}"><img src="{{ dproduct | img_url: '480x480' }}" class="design-selector-design-image" /><div class="design-selector-design-label">{{ dproduct.title }}</div></div>
          {% endif %}
        {% endfor %}
      </div>
      <div class="design-selector-products" data-product-category="Patterns">
        {% for dproduct in collections.all-designs.products limit: 250 %}
          {% if dproduct.tags contains "patterns" %}
            <div class="design-selector-design" data-design-handle="{{ dproduct.handle }}" data-design-title="{{ dproduct.title | replace: " ", "+" }}"><img src="{{ dproduct | img_url: '480x480' }}" class="design-selector-design-image" /><div class="design-selector-design-label">{{ dproduct.title }}</div></div>
          {% endif %}
        {% endfor %}
      </div>
      <div class="design-selector-products" data-product-category="Food">
        {% for dproduct in collections.all-designs.products limit: 250 %}
          {% if dproduct.tags contains "food" %}
            <div class="design-selector-design" data-design-handle="{{ dproduct.handle }}" data-design-title="{{ dproduct.title | replace: " ", "+" }}"><img src="{{ dproduct | img_url: '480x480' }}" class="design-selector-design-image" /><div class="design-selector-design-label">{{ dproduct.title }}</div></div>
          {% endif %}
        {% endfor %}
      <div class="design-selector-products" data-product-category="Collaboration">
        {% for dproduct in collections.all-designs.products limit: 250 %}
          {% if dproduct.tags contains "collaboration" %}
            <div class="design-selector-design" data-design-handle="{{ dproduct.handle }}" data-design-title="{{ dproduct.title | replace: " ", "+" }}"><img src="{{ dproduct | img_url: '480x480' }}" class="design-selector-design-image" /><div class="design-selector-design-label">{{ dproduct.title }}</div></div>
          {% endif %}
        {% endfor %}
      </div>
    </div>
  </main>

  {% section 'footer' %}

  {{ 'ajaxify.min.js' | asset_url | script_tag }}
  {{ 'toggle-handler.js' | asset_url | script_tag }}

  {{ 'parse-urlparams.js' | asset_url | script_tag }}
  {{ 'shuffle-dom-siblings.js' | asset_url | script_tag }}
  {{ 'quickadd-handler.js' | asset_url | script_tag }}
  {{ 'popout-cart.js' | asset_url | script_tag }}

  <style type="text/css">
    #MainContent {
      position: relative;
    }
    .open-design-modal {
      cursor: pointer;
    }
    #design-selector {
      z-index: 10000;
      display: none;
      position: absolute;
      top:0;
      left:0;
      right:0;
      min-height: 115%;
      background-color: #FFFFFF;
    }
    #design-selector > h4 {
      text-transform: uppercase;
      text-align: center;
      margin: 30px auto;
    }
    #design-selector > .close-modal {
      position: absolute;
      top: 40px;
      right: 60px;
      font-size: 18px;
      cursor: pointer;
    }
    .design-selector-nav {
      text-align: center;
      margin-bottom: 20px;
    }
    .design-selector-nav > a {
      text-decoration: none;
    }
    .design-selector-products {
      display: none;
      text-align: center;
    }
    .design-selector-design {
      display: inline-block;
      width: 240px;
      height: 240px;
      max-width: 240px;
      max-height: 240px;
      margin: 12px;
      object-fit: none;
      cursor: pointer;
      overflow: hidden;
    }
    .design-selector-design-image {
      width: 480px;
      height: 480px;
      max-width: 480px;
      max-height: 480px;
      margin-left: -120px;
      margin-top: -120px;
    }
    .dark-overlay {
      display: none;
      height: 100vh;
      width: 100%;
      background: rgba(0, 0, 0, 0.5);
      position: fixed;
      opacity: 1;
      top: 0;
      transition: 0.6s;
      z-index: 1000;
    }
  </style>

  <script type="text/javascript">
    var locales = {
      'en': {
        'CA': 'poches-development-mica.myshopify.com'
      },
      'fr': {
        'EU': 'pochesetfilsfrance.myshopify.com'
      }
    };
    $(document).ready(function () {
      for (language in locales) {
        for(country in locales[language]) {
          var selected = '';
          if(locales[language][country] == window.location.host) {
            selected = ' selected="selected"';
          }
          $('.country-switcher-dropdown').append('<option value="' + language + '-' + country + '"' + selected + '>' + language.toUpperCase() + '-' + country + '</option>');
        }
      }
      $('.country-switcher-dropdown').change(function () {
        var countrySwitch = $(this).val().split('-');
        window.location.host = locales[countrySwitch[0]][countrySwitch[1]];
      });

      var euCountryCodes = ["AT", "BE", "BG", "HR", "CY", "CZ", "DK", "EE", "FI", "FR", "DE", "GR", "HU", "IE", "IT", "LV", "LT", "LU", "MT", "NL", "PL", "PT", "RO", "SK", "SI", "ES", "SE", "GB", "UK", "GR", "GF", "GP", "MQ", "ME", "YT", "RE", "MF", "GI", "AX", "PM", "GL", "BL", "SX", "AW", "CW", "WF", "PF", "NC", "TF", "AI", "BM", "IO", "VG", "KY", "FK", "MS", "PN", "SH", "GS", "TC", "AD", "LI", "MC", "SM", "VA", "JE", "GG", "GI"];
      var language = (window.navigator.userLanguage || window.navigator.language).split('-')[0];
      if(locales[language]) {
        $.getJSON('http://ip-api.com/json?callback=?', function (ipData) {
          var countryCode = ipData['countryCode'];
          if($.inArray(countryCode, euCountryCodes)) {
            countryCode = 'EU';
          }
          if(window.location.host != locales[language][countryCode]) {
            window.location.host = locales[language][countryCode];
          }
        });
      }
    });
  </script>


  <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.4.7/webfont.js" type="text/javascript"></script>
  <script type="text/javascript">WebFont.load({  google: {    families: ["Rubik:300,regular,500,700,900"]  }});</script>
  {{ 'functions.js' | asset_url | script_tag }}
  {%- comment -%} Adds Google Font Rubik {%- endcomment -%}
  <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.4.7/webfont.js" type="text/javascript"></script>
  <!-- [if lt IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js" type="text/javascript"></script><![endif] -->
  <script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script>
</body>
</html>